–ù–∞–ø–∏—à–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ñ–æ—Ä–º—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–∞ react, –Ω—É–∂–Ω–æ –≤–≤–æ–¥–∏—Ç—å –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å, —Ç–∞–∫–∂–µ –∫–Ω–æ–ø–∫–∞ –∑–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å –∏ –∫–Ω–æ–ø–∫–∞ —Å–∞–±–º–∏—Ç–∞, —Å—Ç–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π –∏—Å—Ö–æ–¥—è –∏–∑ –ø—Ä–∏–º–µ—Ä–æ–≤ –≤ rag

--- –§—Ä–∞–≥–º–µ–Ω—Ç 1 (–ò—Å—Ç–æ—á–Ω–∏–∫: document_16, –°—Ö–æ–¥—Å—Ç–≤–æ: 39.8%) ---
  const testQueries = [
    '–ù–∞–ø–∏—à–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ñ–æ—Ä–º—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–∞ react, –Ω—É–∂–Ω–æ –≤–≤–æ–¥–∏—Ç—å –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å, —Ç–∞–∫–∂–µ –∫–Ω–æ–ø–∫–∞ –∑–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å –∏ –∫–Ω–æ–ø–∫–∞ —Å–∞–±–º–∏—Ç–∞, —Å—Ç–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π –∏—Å—Ö–æ–¥—è –∏–∑ –ø—Ä–∏–º–µ—Ä–æ–≤ –≤ rag',
    '–£–¥–∞–ª–∏ –∫–Ω–æ–ø–∫—É –∑–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å',

    '–î–æ–±–∞–≤—å –∫–Ω–æ–ø–∫—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –∫—Ä–∏–ø—Ç–æ-–∫–æ—à–µ–ª–µ–∫, —Ç–∞–∫–∂–µ –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —ç—Ç—É –∫–Ω–æ–ø–∫—É, –Ω—É–∂–Ω–æ —Ç—Ä–∏–≥–µ—Ä–∏—Ç—å –∏–≤–µ–Ω—Ç –ø–æ –∫–æ—Ç–æ—Ä—ã–º –∫–æ—à–µ–ª—å–∫–∏ —Å—Ä–µ–∞–≥–∏—Ä—É—é—Ç –∏ –ø–æ–ø—Ä–æ–±—É—é—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é',
    // '–ò–∑–º–µ–Ω–∏ –∫–Ω–æ–ø–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–æ—à–µ–ª—å–∫–æ–≤ –Ω–∞ –∫–æ–Ω–æ–ø–∫—É –∫–æ—Ç–æ—Ä–∞—è –≤—ã–∑—ã–≤–∞–µ—Ç –≤—Å–ø–ª—ã–≤–∞—é—â–µ–µ –æ–∫–Ω–æ —Å–æ —Å–ø–∏—Å–∫–æ–º –∫–æ—à–µ–ª—å–∫–æ–≤ [metamask, rabby, keplr, phantom]',
    // '–î–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ—à–µ–ª—å–∫–∞ –∏–∑ —Å–ø–∏—Å–∫–∞ —Ä–µ–∞–ª–∏–∑—É–π –ª–æ–≥–∏–∫—É —Ä–∞–±–æ—Ç—ã —Å –∫–æ—à–µ–ª—å–∫–æ–º –ø–æ –∫–ª–∏–∫—É, –∞ —Ç–∞–∫–∂–µ –ø–æ–¥–ø–∏—Å—å –ø—É–±–ª–∏—á–Ω—ã–º –∫–ª—é—á–µ–º',
    // '–í—ã–≤–æ–¥ –∏ –≤ –≤–µ—Ä—Ö–Ω–µ–º –ø—Ä–∞–≤–æ–º —É–≥–ª—É –∫–Ω–æ–ø–∫—É disconnect, –∏ –∞–¥—Ä–µ—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω–æ–≥–æ –∫–æ—à–µ–ª—å–∫–∞, –ø–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –Ω—É–∂–Ω–æ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç—å –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É',
  ];

  fs.mkdirSync('./chat_cache', { recursive: true });

  let fullContent: string[] = [];
  for (const query of testQueries) {

--- –§—Ä–∞–≥–º–µ–Ω—Ç 2 (–ò—Å—Ç–æ—á–Ω–∏–∫: document_45, –°—Ö–æ–¥—Å—Ç–≤–æ: 39.4%) ---
          console.log(`üì≠ [RAG] –ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ –ø–æ –∑–∞–ø—Ä–æ—Å—É "${input}".`);
          return '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞.';
        }
        
        console.log(`‚úÖ [RAG] –ù–∞–π–¥–µ–Ω–æ ${topResults.length} —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤.`);
        
        const contextParts = topResults.map((result, i) => {
          const source = result.document.source;
          const similarity = (result.similarity * 100).toFixed(1);
          return `--- –§—Ä–∞–≥–º–µ–Ω—Ç ${i + 1} (–ò—Å—Ç–æ—á–Ω–∏–∫: ${source}, –°—Ö–æ–¥—Å—Ç–≤–æ: ${similarity}%) ---\n${result.document.content}\n`;
        });
        
        return contextParts.join('\n');
      } catch (error) {
        console.error('[RAG] –û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞:', (error as Error).message);
        return `–û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞: ${(error as Error).message}`;
      }
    },
  });
}


–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ –∑–∞–ø—Ä–æ—Å—É –Ω–µ –Ω–∞–π–¥–µ–Ω–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É—Ç–æ—á–Ω–∏—Ç–µ –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç–µ –∑–∞–ø—Ä–æ—Å.
–£–¥–∞–ª–∏ –∫–Ω–æ–ø–∫—É –∑–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å
–ö–Ω–æ–ø–∫–∞ "–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å" –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–∞ –∏–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ —Ñ–æ—Ä–º—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏. –ï—Å–ª–∏ –≤–∞–º –Ω—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –ª–æ–≥–∏–∫—É –¥–ª—è —ç—Ç–æ–π —Ñ–æ—Ä–º—ã, –¥–∞–π—Ç–µ –∑–Ω–∞—Ç—å!
–î–æ–±–∞–≤—å –∫–Ω–æ–ø–∫—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –∫—Ä–∏–ø—Ç–æ-–∫–æ—à–µ–ª–µ–∫, —Ç–∞–∫–∂–µ –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —ç—Ç—É –∫–Ω–æ–ø–∫—É, –Ω—É–∂–Ω–æ —Ç—Ä–∏–≥–µ—Ä–∏—Ç—å –∏–≤–µ–Ω—Ç –ø–æ –∫–æ—Ç–æ—Ä—ã–º –∫–æ—à–µ–ª—å–∫–∏ —Å—Ä–µ–∞–≥–∏—Ä—É—é—Ç –∏ –ø–æ–ø—Ä–æ–±—É—é—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é
–ö–Ω–æ–ø–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –∫—Ä–∏–ø—Ç–æ-–∫–æ—à–µ–ª–µ–∫ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞. –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –Ω–µ–µ –±—É–¥–µ—Ç —Ç—Ä–∏–≥–≥–µ—Ä–∏—Ç—å—Å—è —Å–æ–±—ã—Ç–∏–µ, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É –∫–æ—à–µ–ª—å–∫–∏ —Å–º–æ–≥—É—Ç —Å—Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –∏ –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é. –ï—Å–ª–∏ –Ω—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –ª–æ–≥–∏–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤—ã–±–æ—Ä –∫–æ—à–µ–ª—å–∫–∞ –∏–∑ —Å–ø–∏—Å–∫–∞), –¥–∞–π—Ç–µ –∑–Ω–∞—Ç—å!